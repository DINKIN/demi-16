;; fibonacci generator
;; generates the 2+Ith fib number

:initialize
SET A, 1       ; 011111 00000 00001  0000000000000001  => 7c01 0001
SET B, 1       ; 011111 00001 00001  0000000000000001  => 7c21 0001 
SET I, 8       ; 011111 00110 00001  0000000000001000  => 7cc1 0008

:loop
IFN I, 0       ; 011111 00110 10011  0000000000000000  => 7cd3 0000
  SET PC, calc ; 011111 11100 00001  0000000000001100  => 7f81 000c
SET PC, done   ; 011111 11100 00001  0000000000010011  => 7f81 0013

:calc
SUB I, 1       ; 011111 00110 00011  0000000000000001  => 7cc3 0001
SET PUSH, A    ; 000000 11000 00001                    => 0301
SET A, B       ; 000001 00000 00001                    => 0401
ADD B, POP     ; 011000 00001 00010                    => 6022
SET PC, loop   ; 011111 11100 00001  0000000000000110  => 7f81 0006

:done
SET PC, done   ; 011111 11100 00001  0000000000010011  => 7f81 0013
